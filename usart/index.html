<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">

<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="chrome=1" />
  <link rel="shortcut icon" type="image/x-icon" href="//www.google.com/images/icons/product/sites-16.ico" />
  <link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/5acb68/system/app/images/apple-touch-icon.png" type="image/png" />
  <script type="text/javascript">
    window.jstiming.load.tick('scl');
  </script>
  <meta name="google-site-verification" content="orvQ4DFSfx4CAZweO0v6wepgC6eoAdNyEYQgR82As_0" />
  <meta name="title" content="USART - QEEWiki" />
  <meta itemprop="name" content="USART - QEEWiki" />
  <meta property="og:title" content="USART - QEEWiki" />
  <meta name="description" content="Q's Electrical Engineering Wiki" />
  <meta itemprop="description" content="Q's Electrical Engineering Wiki" />
  <meta id="meta-tag-description" property="og:description" content="Q's Electrical Engineering Wiki" />
  <style type="text/css">
  </style>
  <link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/5acb68/system/app/themes/simple/standard-css-simple-ltr-ltr.css" />
  <link rel="stylesheet" type="text/css" href="/site/qeewiki/_/rsrc/1601537872000/system/app/css/overlay.css?cb=simple960px70175goog-ws-leftnonethemedefaultstandard" />
  <link rel="stylesheet" type="text/css" href="/site/qeewiki/_/rsrc/1601537872000/system/app/css/camelot/allthemes-view.css" />

  <title>USART - QEEWiki</title>
  <meta itemprop="image" content="/avr-guide/usart/ATmega8%20-%20USART.JPG" />
  <meta property="og:image" content="/avr-guide/usart/ATmega8%20-%20USART.JPG" />
  <script type="text/javascript">
    window.jstiming.load.tick('cl');
  </script>
</head>

<body xmlns="http://www.google.com/ns/jotspot" id="body" class="en">
  <div id="sites-page-toolbar" class="sites-header-divider">
    <div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;">
      <div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div>
    </div>
  </div>
  <div id="sites-chrome-everything-scrollbar">
    <div id="sites-chrome-everything" class="">
      <div id="sites-chrome-page-wrapper" style="direction: ltr">
        <div id="sites-chrome-page-wrapper-inside">
          <div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="">
            <table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="">
              <tr class="sites-header-primary-row" id="sites-chrome-userheader">
                <td id="sites-header-title" class="" role="banner" style="height: 70px">
                  <div class="sites-header-cell-buffer-wrapper">
                    <h2><a href="https://sites.google.com/site/qeewiki/" dir="ltr" id="sites-chrome-userheader-title">QEEWiki</a></h2>
                  </div>
                </td>
                <td class="sites-layout-searchbox  ">
                  <div class="sites-header-cell-buffer-wrapper">
                    <form id="sites-searchbox-form" action="/site/qeewiki/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" />
                      <div id="sites-searchbox-button-set" class="goog-inline-block">
                        <div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div>
                      </div>
                    </form>
                  </div>
                </td>
              </tr>
              <tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
                <td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
                </td>
              </tr>
            </table>
          </div>
          <div id="sites-chrome-main-wrapper">
            <div id="sites-chrome-main-wrapper-inside">
              <table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
                <tr>
                  <td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:175px">
                    <div xmlns="http://www.w3.org/1999/xhtml" id="COMP_2bd" class="sites-embed" role="navigation">
                      <h4 class="sites-embed-title">Navigation</h4>
                      <div class="sites-embed-content sites-sidebar-nav">
                        <ul role="navigation" jotId="navList" class="has-expander">
                          <li class="topLevel nav-first ">
                            <div dir="ltr" style="padding-left: 19px;"><a href="/site/qeewiki/home" jotId="wuid:gx:3b2a480be041e60" class="sites-navigation-link topLevel">Home</a></div>
                          </li>
                          <li class="topLevel parent " wuid="gx:1ec109d3ab18d07f">
                            <div dir="ltr" style="padding-left: 0px;">
                              <div class="expander"></div><a href="/site/qeewiki/projects" jotId="wuid:gx:1ec109d3ab18d07f" class="sites-navigation-link topLevel">My Projects</a>
                            </div>
                            <ul role="navigation" class="has-expander">
                              <li class="">
                                <div dir="ltr" style="padding-left: 38px;"><a href="/site/qeewiki/projects/birchall-exhibit" jotId="wuid:gx:2f17363d8ef867da" class="sites-navigation-link">Leonard Birchall Exhibit</a></div>
                              </li>
                              <li class="">
                                <div dir="ltr" style="padding-left: 38px;"><a href="/site/qeewiki/projects/plc" jotId="wuid:gx:8f11d54a6150943" class="sites-navigation-link">PLC [Hardware Project]</a></div>
                              </li>
                              <li class="">
                                <div dir="ltr" style="padding-left: 38px;"><a href="/site/qeewiki/projects/q-s-max7456-img-gen" jotId="wuid:gx:3e8d0842432aa385" class="sites-navigation-link">Q's MAX7456 Img Gen</a></div>
                              </li>
                              <li class="">
                                <div dir="ltr" style="padding-left: 38px;"><a href="/site/qeewiki/projects/briefcase-controller" jotId="wuid:gx:454516d6082c8052" class="sites-navigation-link">Briefcase Controller [In Development]</a></div>
                              </li>
                              <li class="">
                                <div dir="ltr" style="padding-left: 38px;"><a href="/site/qeewiki/home/solidworks-projects" jotId="wuid:gx:6c95446145ec8103" class="sites-navigation-link">SolidWorks Projects</a></div>
                              </li>
                            </ul>
                          </li>
                          <li class="topLevel parent " wuid="gx:535b3f3a2562e7ad">
                            <div dir="ltr" style="padding-left: 0px;">
                              <div class="expander"></div><a href="/site/qeewiki/books" jotId="wuid:gx:535b3f3a2562e7ad" class="sites-navigation-link topLevel">My Books</a>
                            </div>
                            <ul role="navigation" class="has-expander">
                              <li class="">
                                <div dir="ltr" style="padding-left: 38px;"><a href="/site/qeewiki/books/avr-guide" jotId="wuid:gx:5233ae16d3813d0e" class="sites-navigation-link">AVR GUIDE</a></div>
                              </li>
                              <li class="">
                                <div dir="ltr" style="padding-left: 38px;"><a href="/site/qeewiki/books/3d-printing-guide" jotId="wuid:gx:7a019a1555c1b6b" class="sites-navigation-link">3D Printing Guide</a></div>
                              </li>
                            </ul>
                          </li>
                          <li class="topLevel parent " wuid="gx:431df5631c9dc5f5">
                            <div dir="ltr" style="padding-left: 0px;">
                              <div class="expander"></div><a href="/site/qeewiki/my-bike" jotId="wuid:gx:431df5631c9dc5f5" class="sites-navigation-link topLevel">My Bike</a>
                            </div>
                            <ul role="navigation" class="has-expander">
                              <li class="">
                                <div dir="ltr" style="padding-left: 38px;"><a href="/site/qeewiki/my-bike/shadow-rs-saddlebag-mounts" jotId="wuid:gx:2b90dc9079e015f1" class="sites-navigation-link">Shadow RS Saddlebag Mounts</a></div>
                              </li>
                              <li class="">
                                <div dir="ltr" style="padding-left: 38px;"><a href="/site/qeewiki/my-bike/viper-security-system-fail" jotId="wuid:gx:148fcf698abf9658" class="sites-navigation-link">Viper Security System Fail</a></div>
                              </li>
                            </ul>
                          </li>
                          <li class="topLevel ">
                            <div dir="ltr" style="padding-left: 19px;"><a href="/site/qeewiki/datasheet-library" jotId="wuid:gx:bd46660b1977317" class="sites-navigation-link topLevel">Datasheet Library</a></div>
                          </li>
                          <li class="topLevel ">
                            <div dir="ltr" style="padding-left: 19px;"><a href="/site/qeewiki/friends-tutorials" jotId="wuid:gx:79bc3e8ef01d5fd7" class="sites-navigation-link topLevel">Friends Tutorials</a></div>
                          </li>
                          <li class="topLevel ">
                            <div dir="ltr" style="padding-left: 19px;"><a href="/site/qeewiki/components" jotId="wuid:gx:38afe48728a6cbb2" class="sites-navigation-link topLevel">Components</a></div>
                          </li>
                          <li class="topLevel ">
                            <div dir="ltr" style="padding-left: 19px;"><a href="/site/qeewiki/usefull-avr-stuff" jotId="wuid:gx:9d929f8c6b8e7ca" class="sites-navigation-link topLevel">Usefull Engineering Stuff</a></div>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <div xmlns="http://www.w3.org/1999/xhtml" id="COMP_5818525579565211" class="sites-embed" role="navigation">
                      <h4 class="sites-embed-title">Resources</h4>
                      <div class="sites-embed-content sites-sidebar-nav">
                        <ul role="navigation" jotId="navList" class="has-expander">
                          <li class="topLevel nav-first ">
                            <div dir="ltr" style="padding-left: 19px;"><a href="http://www.sparkfun.com" class="sites-navigation-link topLevel">Sparkfun</a></div>
                          </li>
                          <li class="topLevel ">
                            <div dir="ltr" style="padding-left: 19px;"><a href="http://arduino.cc/en/Reference/HomePage" class="sites-navigation-link topLevel">Arduino Reference</a></div>
                          </li>
                          <li class="topLevel ">
                            <div dir="ltr" style="padding-left: 19px;"><a href="http://www.eevblog.com/" class="sites-navigation-link topLevel">EEVBlog</a></div>
                          </li>
                          <li class="topLevel ">
                            <div dir="ltr" style="padding-left: 19px;"><a href="http://fritzing.org/download/" class="sites-navigation-link topLevel">Fritzing Projects</a></div>
                          </li>
                          <li class="topLevel ">
                            <div dir="ltr" style="padding-left: 19px;"><a href="http://www.adafruit.com/" class="sites-navigation-link topLevel">Ada Fruit</a></div>
                          </li>
                          <li class="topLevel ">
                            <div dir="ltr" style="padding-left: 19px;"><a href="http://www.pololu.com/" class="sites-navigation-link topLevel">Pololu</a></div>
                          </li>
                          <li class="topLevel parent ">
                            <div dir="ltr" style="padding-left: 0px;">
                              <div class="expander"></div><a href="http://www.atmel.com" class="sites-navigation-link topLevel">Atmel</a>
                            </div>
                            <ul role="navigation" class="has-expander">
                              <li class="">
                                <div dir="ltr" style="padding-left: 38px;"><a href="http://www.atmel.com/dyn/resources/prod_documents/doc2486.pdf" class="sites-navigation-link">Atmega8 Datasheet</a></div>
                              </li>
                              <li class="">
                                <div dir="ltr" style="padding-left: 38px;"><a href="http://www.atmel.com/Images/Atmel-8271-8-bit-AVR-Microcontroller-ATmega48A-48PA-88A-88PA-168A-168PA-328-328P_datasheet.pdf" class="sites-navigation-link">ATMega168/328 Datasheet</a></div>
                              </li>
                            </ul>
                          </li>
                          <li class="topLevel ">
                            <div dir="ltr" style="padding-left: 19px;"><a href="/site/qeewiki/software-links" jotId="wuid:gx:2c8ace555c82644b" class="sites-navigation-link topLevel">Software Links</a></div>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <div xmlns="http://www.w3.org/1999/xhtml" id="COMP_6477897660156883" class="sites-embed" role="navigation">
                      <h4 class="sites-embed-title">None EE Faves</h4>
                      <div class="sites-embed-content sites-sidebar-nav">
                        <ul role="navigation" jotId="navList">
                          <li class="nav-first ">
                            <div dir="ltr" style="padding-left: 5px;"><a href="http://www.minecraft.net/" class="sites-navigation-link">Minecraft !!!</a></div>
                          </li>
                          <li class="">
                            <div dir="ltr" style="padding-left: 5px;"><a href="http://www.exploremusic.com/shows/ongoing-history-of-new-music/" class="sites-navigation-link">Ongoing History of New Music</a></div>
                          </li>
                          <li class="">
                            <div dir="ltr" style="padding-left: 5px;"><a href="http://www.white-wolf.com/" class="sites-navigation-link">White Wolf Ent.</a></div>
                          </li>
                          <li class="">
                            <div dir="ltr" style="padding-left: 5px;">
                              <a href="http://www.escapistmagazine.com/videos/view/there-will-be-brawl" class="sites-navigation-link">There Will Be BRAWL</a>
                            </div>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </td>
                  <td id="sites-canvas-wrapper">
                    <div id="sites-canvas" role="main">
                      <div id="goog-ws-editor-toolbar-container"> </div>
                      <div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
                        <A href="/site/qeewiki/books" dir="ltr">My Books</A> &gt; <A href="/site/qeewiki/books/avr-guide" dir="ltr">AVR GUIDE</A> &gt;
                      </div>
                      <h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
                        <span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">USART</span>
                      </h3>
                      <div id="sites-canvas-main" class="sites-canvas-main">
                        <div id="sites-canvas-main-content">
                          <div xmlns="http://www.w3.org/1999/xhtml" class="sites-layout-name-one-column-hf sites-layout-vbox">
                            <div class="sites-layout-tile sites-tile-name-header sites-layout-empty-tile">
                              <div dir="ltr"><br /></div>
                            </div>
                            <div class="sites-layout-tile sites-tile-name-content-1">
                              <div dir="ltr"><b>INTRODUCTION:</b>
                                <div><br /></div>
                                <div><span>    In lamest terms the USART (Universal Synchronous and Asynchronous serial Receiver and Transmitter) is a 0-5V version of the RS232 serial protocol.  A lot of devices communicate over this protocol and several devices exist to boost the USART to RS232 levels so that you could talk to serial devices.  RS232 was the protocol of choice before USB and many industrial and aviation hardware still contain RS232 ports.</span><br /></div>
                                <div><span><br /></span></div>
                                <div><span><br /></span></div>
                                <div><span>
                                    <hr />
                                  </span></div>
                                <div><span><br /></span></div>
                                <div><span><br /></span></div>
                                <div><span>
                                    <font face="'courier new', monospace"><span style="font-size:medium"><b>HARDWARE:</b></span></font>
                                  </span></div>
                                <div><span><br />
                                    <div style="display:block;text-align:left"><a href="/avr-guide/usart/ATmega8%20-%20USART.JPG?attredirects=0" imageanchor="1"><img border="0" src="/avr-guide/usart/ATmega8%20-%20USART.JPG" /></a></div>
                                  </span></div>
                                <div><span>
                                    <div style="display:block;text-align:left"></div><i style="font-family:courier new,monospace">Figure 1: ATmega8 USART</i>
                                  </span></div>
                                <div><span><br /></span></div>
                                <div><span><br /></span></div>
                                <div><span><span>    Hardware wise serial is simple.  Most the time you will be using 2 pins and a ground, the RXD (Receive Data) and TXD (Transmit Data).  The device that you are trying to talk to will also have a TX and a RX pin, in order to get the two devices talking you have to hook up the TX of each device to the RX pin of the other.  If you think about it it's just like your telephone at home, you talk into the microphone (transmitter) and the person on the other end hears what you said on the Receiver (speaker).  A clock pin also exits XCK, however, most devices do not need this line.</span></span></div>
                                <div><br /></div>
                                <div>
                                  <div style="display:block;text-align:left"><a href="/avr-guide/usart/USART%20-%20Xbee%20Hookup.JPG?attredirects=0" imageanchor="1"><img border="0" src="/avr-guide/usart/USART%20-%20Xbee%20Hookup.JPG" /></a></div><i style="font-family:courier new,monospace">Figure 2: ATmega8 &amp; ATmega168/328 to Xbee Hookup</i>
                                </div>
                                <div><br /></div>
                                <div><br /></div>
                                <div><span><span><span>    </span>Like any other device, it is important to tie the grounds of both devices together.  Failure to do so will result in garbage data and can damage both devices.</span></span></div>
                                <div><br /></div>
                                <div><span>    Lastly remember that both the devices are rated at the same voltage or that the lower voltage device can take the voltage of the higher device on on its receive pin.   The perfect example is the <a href="http://www.sparkfun.com/products/8664" target="_blank" rel="nofollow">Xbee</a> which is a 3.3V device, however, its serial data pins are 5V tolerant so an AVR running at any voltage up to 5V and still talk to the 3.3V Xbee.  If the 3.3V device is not 5V tolerant you could use a <a href="http://www.sparkfun.com/products/8745" target="_blank" rel="nofollow">Logic Level Converter</a> (I love you <a href="http://www.sparkfun.com/" target="_blank" rel="nofollow">Sparkfun</a>).</span></div>
                                <div><br /></div>
                                <div><span>    Now a few cool things about the USART.  If hook the RX and TX signal on the AVR you can test to see if your AVR is transmitting/receiving properly.</span></div>
                                <div><span><br /></span></div>
                                <div><span><span>    Using the <a href="http://www.sparkfun.com/products/316" target="_blank" rel="nofollow">MAX232</a> in order to convert from the TTL levels to RS232 levels in order to communicate with your PC.  Or an <a href="http://www.sparkfun.com/products/9716" target="_blank" rel="nofollow">FTDI FT232RL</a> Serial to USB chip in order to use Serial over USB (more and more common now that PCs do not come with serial ports.   The Arduino has one built in).</span></span></div>
                                <div><br /></div>
                                <div><span><br /></span></div>
                                <div><span>
                                    <hr />
                                  </span></div>
                                <div><span><br /></span></div>
                                <div><br /></div>
                                <div><b>
                                    <font face="'courier new', monospace"><span style="font-size:medium">THEORY OF OPERATION:</span></font>
                                  </b></div>
                                <div><br /></div>
                                <div><span>    The USART outputs serial data over the TX (transmit) pin and listens for data on the RX (Receive)  pin using TTL voltage levels (0-5V).  The protocol is fairly simple, if the settings on both devices match they should be able to talk to each other.</span><br /></div>
                                <div><span><br /></span></div>
                                <div><span><span>    The AVR datasheet gives a good writeup of the protocol so I'm not going to go into any detail about it.  I however say that the most common setting is:  </span></span></div>
                                <div style="color:rgb(53,28,117)"><br /></div>
                                <blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px;color:rgb(53,28,117)">
                                  <blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px">
                                    <div>Baud rate: 9600 </div>
                                  </blockquote>
                                  <blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px">
                                    <div>Data bits: 8 </div>
                                  </blockquote>
                                  <blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px">
                                    <div>Parity: None </div>
                                  </blockquote>
                                  <blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px">
                                    <div>Stop Bit: 1 </div>
                                  </blockquote>
                                  <blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px">
                                    <div>Flow Control: None</div>
                                  </blockquote>
                                </blockquote>
                                <div><span><span><br /></span></span></div>
                                <div><br /></div>
                                <div><span><span><span>    The difference between the registers on the ATmega8 and the ATmega168/328 is mostly a "0" at the end of most register names.  I'm guessing that this is preparations for AVRs with multiple USART ports.  In this section </span></span></span>I am going to change up for format a bit and show both registers under the same table.</div>
                                <div><span><span><span><br /></span></span></span></div>
                                <div><br /></div>
                                <div><span><span><span>
                                        <table border="1" bordercolor="#888888" cellspacing="0" style="border-collapse:collapse;border-color:rgb(136,136,136);border-width:1px">
                                          <tbody>
                                            <tr>
                                              <td style="width:58px;height:15px"> </td>
                                              <td style="width:58px;height:15px"><b> 7 bit</b></td>
                                              <td style="width:58px;height:15px"><b>6 bit </b></td>
                                              <td style="width:58px;height:15px"><b>5 bit </b></td>
                                              <td style="width:58px;height:15px"><b>4 bit </b></td>
                                              <td style="width:58px;height:15px"><b>3 bit </b></td>
                                              <td style="width:58px;height:15px"><b>2 bit </b></td>
                                              <td style="width:58px;height:15px"><b>1 bit </b></td>
                                              <td style="width:58px;height:15px"><b>0 bit </b></td>
                                              <td style="width:117px;height:15px"><b>AVR Type</b></td>
                                            </tr>
                                            <tr>
                                              <td style="width:58px;height:15px">UCSRA</td>
                                              <td style="width:58px;height:15px">RXC </td>
                                              <td style="width:58px;height:15px">TXC </td>
                                              <td style="width:58px;height:15px">UDRE </td>
                                              <td style="width:58px;height:15px">FE </td>
                                              <td style="width:58px;height:15px">DOR </td>
                                              <td style="width:58px;height:15px">PE </td>
                                              <td style="width:58px;height:15px">U2X </td>
                                              <td style="width:58px;height:15px">MPCM </td>
                                              <td style="width:117px;height:15px">ATmega8 </td>
                                            </tr>
                                            <tr>
                                              <td style="width:58px;height:15px">UCSR0A</td>
                                              <td style="width:58px;height:15px">RXCn </td>
                                              <td style="width:58px;height:15px">TXCn </td>
                                              <td style="width:58px;height:15px">UDREn </td>
                                              <td style="width:58px;height:15px">FEn </td>
                                              <td style="width:58px;height:15px">DORn </td>
                                              <td style="width:58px;height:15px">PEn </td>
                                              <td style="width:58px;height:15px">U2Xn </td>
                                              <td style="width:58px;height:15px">MPCMn </td>
                                              <td style="width:117px;height:15px">ATmega168/328 </td>
                                            </tr>
                                          </tbody>
                                        </table><i style="font-family:courier new,monospace">USART Control and Status Register A</i>
                                      </span></span></span></div>
                                <div><span><span><span><br /></span></span></span></div>
                                <div><span><span><span><br /></span></span></span></div>
                                <div><span><span><span>
                                        <table border="1" bordercolor="#888888" cellspacing="0" style="margin:0px;border-collapse:collapse;border-color:rgb(136,136,136);border-width:1px">
                                          <tbody>
                                            <tr>
                                              <td style="vertical-align:top;width:58px;height:15px"> </td>
                                              <td style="vertical-align:top;width:58px;height:15px"><b> 7 bit</b></td>
                                              <td style="vertical-align:top;width:58px;height:15px"><b>6 bit </b></td>
                                              <td style="vertical-align:top;width:58px;height:15px"><b>5 bit </b></td>
                                              <td style="vertical-align:top;width:58px;height:15px"><b>4 bit </b></td>
                                              <td style="vertical-align:top;width:58px;height:15px"><b>3 bit </b></td>
                                              <td style="vertical-align:top;width:58px;height:15px"><b>2 bit </b></td>
                                              <td style="vertical-align:top;width:58px;height:15px"><b>1 bit </b></td>
                                              <td style="vertical-align:top;width:58px;height:15px"><b>0 bit </b></td>
                                              <td style="vertical-align:top;width:117px;height:15px"><b>AVR Type</b></td>
                                            </tr>
                                            <tr>
                                              <td style="vertical-align:top;width:58px;height:15px">UCSRB</td>
                                              <td style="vertical-align:top;width:58px;height:15px">RXCIE </td>
                                              <td style="vertical-align:top;width:58px;height:15px">TXCIE </td>
                                              <td style="vertical-align:top;width:58px;height:15px">UDRIE </td>
                                              <td style="vertical-align:top;width:58px;height:15px">RXEN</td>
                                              <td style="vertical-align:top;width:58px;height:15px">TXEN</td>
                                              <td style="vertical-align:top;width:58px;height:15px">UCSZ2</td>
                                              <td style="vertical-align:top;width:58px;height:15px">RXB8</td>
                                              <td style="vertical-align:top;width:58px;height:15px">TXB8 </td>
                                              <td style="vertical-align:top;width:117px;height:15px">ATmega8 </td>
                                            </tr>
                                            <tr>
                                              <td style="vertical-align:top;width:58px;height:15px">UCSR0B</td>
                                              <td style="vertical-align:top;width:58px;height:15px">RXCIE0</td>
                                              <td style="vertical-align:top;width:58px;height:15px">TXCIE0</td>
                                              <td style="vertical-align:top;width:58px;height:15px">UDRIE0 </td>
                                              <td style="vertical-align:top;width:58px;height:15px">RXEN0</td>
                                              <td style="vertical-align:top;width:58px;height:15px">TXEN0</td>
                                              <td style="vertical-align:top;width:58px;height:15px">UCSZ02 </td>
                                              <td style="vertical-align:top;width:58px;height:15px">RXB80</td>
                                              <td style="vertical-align:top;width:58px;height:15px">TXB80</td>
                                              <td style="vertical-align:top;width:117px;height:15px">ATmega168/328 </td>
                                            </tr>
                                          </tbody>
                                        </table><i style="font-family:courier new,monospace">USART Control and Status Register B</i>
                                      </span></span></span></div>
                                <div><span><span><span><br /></span></span></span></div>
                                <div><span><span><span><br /></span></span></span></div>
                                <div><span>
                                    <table border="1" bordercolor="#888888" cellspacing="0" style="margin:0px;border-collapse:collapse;border-color:rgb(136,136,136);border-width:1px">
                                      <tbody>
                                        <tr>
                                          <td style="vertical-align:top;width:52px;height:15px"> </td>
                                          <td style="vertical-align:top;width:59px;height:15px"><b> 7 bit</b></td>
                                          <td style="vertical-align:top;width:59px;height:15px"><b>6 bit </b></td>
                                          <td style="vertical-align:top;width:51px;height:15px"><b>5 bit </b></td>
                                          <td style="vertical-align:top;width:52px;height:15px"><b>4 bit </b></td>
                                          <td style="vertical-align:top;width:52px;height:15px"><b>3 bit </b></td>
                                          <td style="vertical-align:top;width:52px;height:15px"><b>2 bit </b></td>
                                          <td style="vertical-align:top;width:52px;height:15px"><b>1 bit </b></td>
                                          <td style="vertical-align:top;width:52px;height:15px"><b>0 bit </b></td>
                                          <td style="vertical-align:top;width:154px;height:15px"><b>AVR Type</b></td>
                                        </tr>
                                        <tr>
                                          <td style="vertical-align:top;width:52px;height:15px">UCSRC</td>
                                          <td style="vertical-align:top;width:59px;height:15px">URSEL*</td>
                                          <td style="vertical-align:top;width:59px;height:15px">UMSEL</td>
                                          <td style="vertical-align:top;width:51px;height:15px">UPM1</td>
                                          <td style="vertical-align:top;width:52px;height:15px">UPM0</td>
                                          <td style="vertical-align:top;width:52px;height:15px">USBS</td>
                                          <td style="vertical-align:top;width:52px;height:15px">UCSZ1</td>
                                          <td style="vertical-align:top;width:52px;height:15px">UCSZ0</td>
                                          <td style="vertical-align:top;width:52px;height:15px">UCPOL</td>
                                          <td style="vertical-align:top;width:154px;height:15px">ATmega8 </td>
                                        </tr>
                                        <tr>
                                          <td style="vertical-align:top;width:52px;height:15px">UCSR0C</td>
                                          <td style="vertical-align:top;width:59px;height:15px">UMSELn1</td>
                                          <td style="vertical-align:top;width:59px;height:15px">UMSELn0</td>
                                          <td style="vertical-align:top;width:51px;height:15px">UPMn1</td>
                                          <td style="vertical-align:top;width:52px;height:15px">UPMn0</td>
                                          <td style="vertical-align:top;width:52px;height:15px">USBSn</td>
                                          <td style="vertical-align:top;width:52px;height:15px">UCSZn1</td>
                                          <td style="vertical-align:top;width:52px;height:15px">UCSZn0</td>
                                          <td style="vertical-align:top;width:52px;height:15px">UCPOLn</td>
                                          <td style="vertical-align:top;width:154px;height:15px">ATmega168/328 </td>
                                        </tr>
                                      </tbody>
                                    </table><i style="font-family:courier new,monospace">USART Control and Status Register C (* ATmega8 only)</i>
                                  </span></div>
                                <div><span><i><br /></i></span></div>
                                <div><span><i><br /></i></span></div>
                                <blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px">
                                  <div><span><i>
                                        <table border="1" bordercolor="#888888" cellspacing="0" style="border-collapse:collapse;border-color:rgb(136,136,136);border-width:1px">
                                          <tbody>
                                            <tr>
                                              <td style="width:58px;height:15px"><span style="font-style:normal"><b> UMSEL</b></span></td>
                                              <td style="width:178px;height:15px"><span style="font-style:normal"><b> MODE </b></span></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:58px;height:15px"><span style="font-style:normal">0</span></td>
                                              <td style="width:178px;height:15px"><span style="font-style:normal"> Asynchronous Operation</span></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:58px;height:15px"><span style="font-style:normal">1</span></td>
                                              <td style="width:178px;height:15px"><span style="font-style:normal"> Synchronous Operation</span></td>
                                            </tr>
                                          </tbody>
                                        </table>
                                      </i></span></div>
                                  <div style="font-family:courier new,monospace"><span><i>UMSEL Bit Settings (ATmega8 ONLY)</i></span></div>
                                </blockquote>
                                <div><span><i><br /></i></span></div>
                                <div><span><i><br /></i></span></div>
                                <blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px">
                                  <div><span><i>
                                        <table border="1" bordercolor="#888888" cellspacing="0" style="border-collapse:collapse;border-color:rgb(136,136,136);border-width:1px">
                                          <tbody>
                                            <tr>
                                              <td style="width:91px;height:17px"> <b><span style="font-style:normal">UMSELn</span></b></td>
                                              <td style="width:114px;height:17px"><b><span style="font-style:normal"> UMSELn0</span></b></td>
                                              <td style="width:242px;height:17px"><b> <span style="font-style:normal">MODE</span></b></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:91px;height:15px"><span style="font-style:normal">0</span></td>
                                              <td style="text-align:center;width:114px;height:15px"><span style="font-style:normal">0</span></td>
                                              <td style="width:242px;height:15px"><span style="font-style:normal"> Asynchronous Operation </span></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:91px;height:15px"><span style="font-style:normal">0</span></td>
                                              <td style="text-align:center;width:114px;height:15px"><span style="font-style:normal">1</span></td>
                                              <td style="width:242px;height:15px"><span style="font-style:normal"> Synchronous Operation </span></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:91px;height:15px"><span style="font-style:normal">1</span></td>
                                              <td style="text-align:center;width:114px;height:15px"><span style="font-style:normal">0</span></td>
                                              <td style="width:242px;height:15px"><span style="font-style:normal"> (Reserved)</span></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:91px;height:15px"><span style="font-style:normal">1</span></td>
                                              <td style="text-align:center;width:114px;height:15px"><span style="font-style:normal">1</span></td>
                                              <td style="width:242px;height:15px"><span style="font-style:normal"> Master SPI Mode</span></td>
                                            </tr>
                                          </tbody>
                                        </table>
                                      </i></span></div>
                                  <div style="font-family:courier new,monospace"><span><i>UMSEL Bits Settings (ATmega168/328 Only)</i></span></div>
                                </blockquote>
                                <div><span><i><br /></i></span></div>
                                <div><span><i><br /></i></span></div>
                                <blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px">
                                  <div><span><i>
                                        <table border="1" bordercolor="#888888" cellspacing="0" style="border-collapse:collapse;border-color:rgb(136,136,136);border-width:1px">
                                          <tbody>
                                            <tr>
                                              <td style="width:111px;height:15px"><span style="font-style:normal"> <b>UPM1 (UPMn1)</b></span></td>
                                              <td style="width:119px;height:15px"><span style="font-style:normal"><b> UPM0 (UPM00) </b></span></td>
                                              <td style="width:206px;height:15px">
                                                <blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px"><span style="font-style:normal"><b> PARITY MODE</b></span></blockquote>
                                              </td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:111px;height:15px"><span style="font-style:normal">0</span></td>
                                              <td style="text-align:center;width:119px;height:15px"><span style="font-style:normal">0</span></td>
                                              <td style="width:206px;height:15px"><span style="font-style:normal"> Disabled </span></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:111px;height:15px"><span style="font-style:normal">0</span></td>
                                              <td style="text-align:center;width:119px;height:15px"><span style="font-style:normal">1</span></td>
                                              <td style="width:206px;height:15px"><span style="font-style:normal"> Reserved </span></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:111px;height:15px"><span style="font-style:normal">1</span></td>
                                              <td style="text-align:center;width:119px;height:15px"><span style="font-style:normal">0</span></td>
                                              <td style="width:206px;height:15px"><span style="font-style:normal"> Enabled, Even Parity </span></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:111px;height:16px"><span style="font-style:normal">1</span></td>
                                              <td style="text-align:center;width:119px;height:16px"><span style="font-style:normal">1</span></td>
                                              <td style="width:206px;height:16px"><span style="font-style:normal"> Enabled, Odd Parity</span> </td>
                                            </tr>
                                          </tbody>
                                        </table>
                                      </i></span></div>
                                  <div style="font-family:courier new,monospace"><span><i>UPM (UPMn) Bit Settings</i></span></div>
                                </blockquote>
                                <div><span><i><br /></i></span></div>
                                <div><span><i><br /></i></span></div>
                                <blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px">
                                  <div><span><i>
                                        <table border="1" bordercolor="#888888" cellspacing="0" style="border-collapse:collapse;border-color:rgb(136,136,136);border-width:1px">
                                          <tbody>
                                            <tr>
                                              <td style="width:147px;height:17px"><span style="font-style:normal"><b> USBS (USBS0)</b></span></td>
                                              <td style="width:186px;height:17px"><span style="font-style:normal"><b> Stop Bit(s)</b> </span></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:147px;height:15px"><span style="font-style:normal">0</span></td>
                                              <td style="width:186px;height:15px"><span style="font-style:normal"> 1 bit </span></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:147px;height:15px"><span style="font-style:normal">1</span></td>
                                              <td style="width:186px;height:15px"><span style="font-style:normal"> 2 bit </span></td>
                                            </tr>
                                          </tbody>
                                        </table>
                                      </i></span></div>
                                  <div style="font-family:courier new,monospace"><span><i>USBS (USBS0) Bit Settings</i></span></div>
                                </blockquote>
                                <div><span><i><br /></i></span></div>
                                <div><span><i><br /></i></span></div>
                                <blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px">
                                  <div><span><i>
                                        <table border="1" bordercolor="#888888" cellspacing="0" style="border-collapse:collapse;border-color:rgb(136,136,136);border-width:1px">
                                          <tbody>
                                            <tr>
                                              <td style="width:131px;height:19px"> <span style="font-style:normal"><b>UCSZ2 (UCSZ02)</b></span></td>
                                              <td style="width:131px;height:19px"><span style="font-style:normal"><b> UCSZ1 (UCSZ01)</b></span></td>
                                              <td style="width:135px;height:19px"><span style="font-style:normal"><b> UCSZ0 (UCSZ00)</b></span></td>
                                              <td style="width:133px;height:19px"><span style="font-style:normal"><b> CHAR SIZE</b></span></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:131px;height:15px"><span style="font-style:normal">0</span></td>
                                              <td style="text-align:center;width:131px;height:15px"><span style="font-style:normal">0 </span></td>
                                              <td style="text-align:center;width:135px;height:15px"><span style="font-style:normal">0 </span></td>
                                              <td style="text-align:left;width:133px;height:15px"><span style="font-style:normal"> 5-bit</span></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:131px;height:15px"><span style="font-style:normal">0</span></td>
                                              <td style="text-align:center;width:131px;height:15px"><span style="font-style:normal">0 </span></td>
                                              <td style="text-align:center;width:135px;height:15px"><span style="font-style:normal">1 </span></td>
                                              <td style="text-align:left;width:133px;height:15px"><span style="font-style:normal"> 6-bit</span></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:131px;height:15px"><span style="font-style:normal">0</span></td>
                                              <td style="text-align:center;width:131px;height:15px"><span style="font-style:normal">1 </span></td>
                                              <td style="text-align:center;width:135px;height:15px"><span style="font-style:normal">0 </span></td>
                                              <td style="text-align:left;width:133px;height:15px"><span style="font-style:normal"> 7-bit</span></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:131px;height:15px"><span style="font-style:normal">0</span></td>
                                              <td style="text-align:center;width:131px;height:15px"><span style="font-style:normal">1 </span></td>
                                              <td style="text-align:center;width:135px;height:15px"><span style="font-style:normal">1 </span></td>
                                              <td style="text-align:left;width:133px;height:15px"><span style="font-style:normal"> 8-bit</span></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:131px;height:15px"><span style="font-style:normal">1</span></td>
                                              <td style="text-align:center;width:131px;height:15px"><span style="font-style:normal">0 </span></td>
                                              <td style="text-align:center;width:135px;height:15px"><span style="font-style:normal">0 </span></td>
                                              <td style="text-align:left;width:133px;height:15px"><span style="font-style:normal"> Reserved</span></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:131px;height:15px"><span style="font-style:normal">1</span></td>
                                              <td style="text-align:center;width:131px;height:15px"><span style="font-style:normal">0 </span></td>
                                              <td style="text-align:center;width:135px;height:15px"><span style="font-style:normal">1 </span></td>
                                              <td style="text-align:left;width:133px;height:15px"><span style="font-style:normal"> Reserved</span></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:131px;height:15px"><span style="font-style:normal">1</span></td>
                                              <td style="text-align:center;width:131px;height:15px"><span style="font-style:normal">1 </span></td>
                                              <td style="text-align:center;width:135px;height:15px"><span style="font-style:normal">0 </span></td>
                                              <td style="text-align:left;width:133px;height:15px"><span style="font-style:normal"> Reserved</span></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:131px;height:15px"><span style="font-style:normal">1</span></td>
                                              <td style="text-align:center;width:131px;height:15px"><span style="font-style:normal">1 </span></td>
                                              <td style="text-align:center;width:135px;height:15px"><span style="font-style:normal">1</span> </td>
                                              <td style="width:133px;height:15px"> <span style="font-style:normal">9-bit</span></td>
                                            </tr>
                                          </tbody>
                                        </table>
                                      </i></span></div>
                                  <div style="font-family:courier new,monospace"><span><i>UCSZ (UCSZn) Bit Settings</i></span></div>
                                </blockquote>
                                <div><span><i><br /></i></span></div>
                                <div><span><i><br /></i></span></div>
                                <blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px">
                                  <div><span><i>
                                        <table border="1" bordercolor="#888888" cellspacing="0" style="border-collapse:collapse;border-color:rgb(136,136,136);border-width:1px">
                                          <tbody>
                                            <tr>
                                              <td style="width:142px;height:15px"> <span style="font-style:normal"><b>UCPOL (UCPOLn)</b></span></td>
                                              <td style="width:150px;height:15px"><span style="font-style:normal"><b> TX Data Change</b></span></td>
                                              <td style="width:182px;height:15px"><span style="font-style:normal"><b> RX Data Sampled</b></span></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:142px;height:15px"><span style="font-style:normal">0</span></td>
                                              <td style="width:150px;height:15px"><span style="font-style:normal"> Rising XCK Edge</span></td>
                                              <td style="width:182px;height:15px"><span style="font-style:normal"> Falling XCK Edge</span></td>
                                            </tr>
                                            <tr>
                                              <td style="text-align:center;width:142px;height:15px"><span style="font-style:normal">1</span></td>
                                              <td style="width:150px;height:15px"><span style="font-style:normal"> Falling XCK Edge</span></td>
                                              <td style="width:182px;height:15px"><span style="font-style:normal"> Rising XCK Edge</span></td>
                                            </tr>
                                          </tbody>
                                        </table><span style="font-family:courier new,monospace">UCPOL (UCPOL0) Bit Settings</span>
                                      </i></span></div>
                                </blockquote>
                                <div><span><i><br /></i></span></div>
                                <div><i><br /></i></div>
                                <div>
                                  <table border="1" bordercolor="#888888" cellspacing="0" style="border-collapse:collapse;border-color:rgb(136,136,136);border-width:1px">
                                    <tbody>
                                      <tr>
                                        <td style="width:88px;height:15px"> <b>NAME</b></td>
                                        <td style="width:340px;height:15px"><b> FUNCTION</b></td>
                                        <td style="width:117px;height:15px"><b> SIZE</b></td>
                                        <td style="width:92px;height:15px"><b> AVR TYPE</b></td>
                                      </tr>
                                      <tr>
                                        <td style="width:88px;height:15px"> UDR</td>
                                        <td style="width:340px;height:15px"> Transmit / Receive Buffer</td>
                                        <td style="width:117px;height:15px"> 8 bit</td>
                                        <td style="width:92px;height:15px"> ATmega8</td>
                                      </tr>
                                      <tr>
                                        <td style="width:88px;height:15px"> UDRn</td>
                                        <td style="width:340px;height:15px"> Transmit / Receive Buffer</td>
                                        <td style="width:117px;height:15px"> 8 bit</td>
                                        <td style="width:92px;height:15px"> ATmega328</td>
                                      </tr>
                                      <tr>
                                        <td style="width:88px;height:15px"> UBRRH</td>
                                        <td style="width:340px;height:15px"> Baud Rate Register upper 4 bits</td>
                                        <td style="width:117px;height:15px"> 8 bit (3:0 used)</td>
                                        <td style="width:92px;height:15px"> ATmega8</td>
                                      </tr>
                                      <tr>
                                        <td style="width:88px;height:15px"> UBRRnH</td>
                                        <td style="width:340px;height:15px"> Baud Rate Register upper 4 bits</td>
                                        <td style="width:117px;height:15px"> 8 bit (3:0 used)</td>
                                        <td style="width:92px;height:15px"> ATmega328</td>
                                      </tr>
                                      <tr>
                                        <td style="width:88px;height:15px"> UBRRL</td>
                                        <td style="width:340px;height:15px"> Baud Rate Register Lower 8 bits</td>
                                        <td style="width:117px;height:15px"> 8 bit </td>
                                        <td style="width:92px;height:15px"> ATmega8</td>
                                      </tr>
                                      <tr>
                                        <td style="width:88px;height:19px"> UBRRRnL</td>
                                        <td style="width:340px;height:19px"> Baud Rate Register Lower 8 bits</td>
                                        <td style="width:117px;height:19px"> 8 bit</td>
                                        <td style="width:92px;height:19px"> ATmega328</td>
                                      </tr>
                                    </tbody>
                                  </table><i style="font-family:courier new,monospace">Other Registers</i>
                                </div>
                                <div><i><br /></i></div>
                                <div><span><span><br /></span></span></div>
                                <div><span><span>    </span>So we have 3 Control and Status Registers (A, B &amp; C).  Register A mainly contains status data.  Register B contains all interrupt settings and some none optional settings.  Register C contains all the configuration settings.</span></div>
                                <div><span><br /></span></div>
                                <div><span><br /></span></div>
                                <div><span><br /></span></div>
                                <div><i>Transmitting Speed:</i></div>
                                <div><br /></div>
                                <div><span><span><span><span>    </span>For whatever reason the USART circuitry within the AVR really likes clock frequencies divisible by 1.8432MHz.  If your clock source is not divisible by 1.8432 you will have a percentage of error which will result in unstable communications.  The datasheet provides a large table called </span></span></span>"Examples of Baud Rate Setting" under the "USART" section which shows you the Error rate for all baud rates at given System Clock Settings, As long as the value is less then 0.5% your communication should be solid.  The chart also shows you the value that you want to write into the UBRR register. </div>
                                <div><br /></div>
                                <div><span>    M</span>ost programmers choose to use a a formula in code to figure this out, this way they don't have to reference the datasheet every time they need to change the speed.  The formula for this is:</div>
                                <div><br /></div>
                                <div><br /></div>
                                <blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px">
                                  <div>
                                    <font color="#0000ff">ubrr_value = (Clock_Speed[a.k.a. FOSC] / 16 / Baud_Rate) - 1</font>
                                  </div>
                                </blockquote>
                                <div><br /></div>
                                <div><br /></div>
                                <div><span>    Just remember this value can be up to 12 bits in size, and has to be written across 2 different 8 bit registers, so make sure you make ubrr_value an integer.  Then we need to split the register the value into the upper and lowest 8 bits into the </span>UBRRL(UBRRnL) register and the highest 4 bits into the UBRRH (UBRRnH) register.</div>
                                <div><br /></div>
                                <div><br /></div>
                                <div><br /></div>
                                <div><i>
                                    <font color="#990000"><span style="background-color:rgb(255,255,0)">Special Note for ATmega8:</span></font>
                                  </i></div>
                                <div>
                                  <font color="#990000"><span style="background-color:rgb(255,255,0)"><br /></span></font>
                                </div>
                                <div>
                                  <font color="#990000"><span style="background-color:rgb(255,255,0)">    The C register (UCRSC) on the <b>ATmega8</b> contains URSEL (USART Select) bit.  In order to write data to the UBRRH register the URSEL bit needs to be LOW(0), and in order to write to write to register C (UCRSC) you need to set this bit (URSEL) to HIGH(1).  This does not exist on the ATmega168/328.</span></font><br />
                                </div>
                                <div><br /></div>
                                <div><br /></div>
                                <div><br /></div>
                                <div><i>Frame Formats:</i></div>
                                <div><br /></div>
                                <div><span>    Now that we know how fast to send the data, we have to figure out how to format our data so that the other device could understand the data that we are sending it (and so that we could understand the data that is being sent to us).  All of our configuration options are located in Register C (UCRSC or UCSRnC).  </span></div>
                                <div><span><br /></span></div>
                                <div><span><span>    </span>The first thing we want to do is setup the character size which is controlled by the UCSZ1(UCSZn1) bit and UCSZ0(UCSZn0) bit which are located in Register C, and the oddball UCSZ2(UCSZn2) in register B (which is used for 9 bit data, this rare).  </span></div>
                                <div><br /></div>
                                <div><span>    </span>The next thing we want to setup is the parity which is set by the UPM1 (UPMn1) bit and the UPM0 (UPMn0) bit, the most common parity setting is NONE so we can simply leave the bits LOW (0).  </div>
                                <div><br /></div>
                                <div><span>    </span>Lastly the stop bit which is controlled by the USBS(USBS0) bit, again, 2 bit stop is rarely used so we usually leave this bit LOW(0) for 1bit.</div>
                                <div><br /></div>
                                <div><br /></div>
                                <div><br /></div>
                                <div><i>Enabling Communication:</i></div>
                                <div><br /></div>
                                <div><span>    Now this is something really cool, you can enable the transmission and receive functionality independently.  Both the RXEN(RXENn) bit (Receive Enable) and the TXEN(TXENn) bit (Transmitter Enable) are both located in the B Register (UCSRB or UCSRnB)</span><br /></div>
                                <div><br /></div>
                                <div><br /></div>
                                <div><br /></div>
                                <div><i>Transmit and Receive Buffer:</i></div>
                                <div><br /></div>
                                <div><span>   This is something that blows my mind, the Transmit and Receive share the same register the UDR(UDRn).  Whats even more wild is that the Receive buffer can store 2 characters.  While this sound a bit crazy it does work.  We have to keep 2 things in mind in order to get flawless operation.  The buffer has to be clear in order to transmit.  So all we really have to do is check to see if the buffer is clear UDR(UDRn) and if it is we can transmit.  If it is not clear, reading the data will will cause it clear (much like reading the ADC clears it).  </span><br /></div>
                                <div><br /></div>
                                <div><br /></div>
                                <div><br /></div>
                                <div><i>Status and Fault Bits:</i></div>
                                <div><span><br /></span></div>
                                <div><span><span>    Now that we have our communication up and running we need to be able to monitor its status and any faults.  This is done by Register A (UCSRA or UCSRnA)  </span></span></div>
                                <div><span><span><br /></span></span></div>
                                <div><span><span><span>    </span>The RXC(RXCn) bit (Receive Complete) will be set to HIGH(1) when data has been received and is available in the UDR (UDR0) buffer.  </span></span></div>
                                <div><span><span><br /></span></span></div>
                                <div><span><span><span>    </span>The TXC(TXCn) bit (Transmission Complete) is set to HIGH(1) when a transmission is completed and there is no other data to send.  </span></span></div>
                                <div><span><span><br /></span></span></div>
                                <div><span><span><span>    The </span>U</span></span>DRE(UDREn) is set to HIGH(1) when the buffer (UDR/UDRn) is empty, and therefore ready to be written.  </div>
                                <div><br /></div>
                                <div><span>    </span>The FE(FE0) bit (Frame Error) is set HIGH(1) if the next bit in the receive buffer has a Frame Error.  If the recieve buffer is read the FE(FE0) bit is cleared.</div>
                                <div><br /></div>
                                <div><span>    The DOR(DORn) bit (Data OverRun) is set HIGH(1) if the receive buffer is full (2 characters).  The bit is cleared LOW(0) if the UDR(UDRn) is read.</span><br /></div>
                                <div><span><br /></span></div>
                                <div><span><span>    The UPE(UPEn) bit (Parity Error) is set HIGH(1) if the next character in the receive buffer has a parity error.  The bit is cleared LOW(0) if the UDR(UDRn) is read.</span><br /></span></div>
                                <div><span><br /><br /></span></div>
                                <div><span><br /><i>Interrupts:</i><br /><br /><span>    Finally, the </span>interrupts.  There are 3 of them.  Receive Complete, Data Register Empty and, Transmit Complete.  All 3 of the bits required to set these interrupts are located in the B register (UCSRB or UCSRnB).  Setting the RXCIE(RXCIEn) bit (Receive Complete Interrupt Enable) to HIGH(1) enables the Receive interrupt.  </span>Setting the TXCIE(TXCIEn) bit (Transmit Complete Interrupt Enable)  to HIGH(1) enables the Transmit interrupt.  Setting the UDRIE(UDRIEn) bit (USART Data Register Empty Interrupt Enable) enables the USART Data Register Empty Interrupt.</div>
                                <div><br /></div>
                                <div><span>    <span style="background-color:rgb(255,255,0)">
                                      <font color="#cc0000">IMPORTANT:  If you enable the receiver interrupt you MUST READ the UDR register in order to clear the interrupt flag.  If you fail to read the UDR register in the interrupt routine the interrupt flag will not be cleared.  This will cause the program to will jump back to the main routine, execute 1 line of code (Remember this back from <a href="https://sites.google.com/site/qeewiki/books/avr-guide/interrupts">Interrupt</a> Tutorial) then jump back into the interrupt routine.</font>
                                    </span></span><br /></div>
                                <div><br /></div>
                                <div><br /></div>
                                <div>
                                  <hr />
                                </div>
                                <div><span><br /></span></div>
                                <div><span><br /></span></div>
                                <div><span><b>
                                      <font face="'times new roman', serif"><span style="font-size:medium">SOFTWARE:</span></font>
                                    </b><br /><br /><span>    Lets put some code down to all this theory.</span><br /></span></div>
                                <div><span><br /></span></div>
                                <div><span><br /><i>ATmega8 Code:</i></span></div>
                                <div></div>
                                <div class="sites-codeblock sites-codesnippet-block">
                                  <div><code>// This code waits for a character and transmits the character back (No interrupts)</code></div>
                                  <div><code> </code></div>
                                  <div><i><br /></i></div>
                                  <div><span><code>#include &lt;avr/io.h&gt;</code></span></div>
                                  <div><span><i><span style="font-style:normal;line-height:13px"><code>#include &lt;stdint.h&gt;</code><span><code>    </code><span><code>   <span>    <span>    <span>    <span>  </span></span></span></span>// needed for uint8_t</code></span></span></span></i></span></div>
                                  <div><span><i><span style="font-style:normal;line-height:13px"><span><span><br /></span></span></span></i></span></div>
                                  <div><span><i><br /></i>
                                      <div><code>#define FOSC 16000000 </code><span><code>    </code><span><code>    <span>    <span>    <span>    <span>  </span></span></span></span></code></span></span><code>// Clock Speed</code></div>
                                      <div><code>#define BAUD 9600</code><span><code>    </code><span><code>    </code><span><code>    </code><span><code>    </code></span></span></span></span></div>
                                      <div><code>#define MYUBRR FOSC/16/BAUD -1</code></div>
                                      <div><code><br /></code></div>
                                      <div><code><br /></code></div>
                                      <div>
                                        <font color="#006000" face="monospace">char ReceivedChar;</font>
                                      </div>
                                      <div><br /></div>
                                      <div><br /></div>
                                      <div><code>int main( void )</code></div>
                                      <div><code>{</code></div>
                                      <div><span>
                                          <div><span><code>    </code></span><code>/*Set baud rate */</code></div>
                                          <div><span><code>    </code></span><code>UBRRH = (MYUBRR &gt;&gt; 8);</code></div>
                                          <div><span><code>    </code></span><code>UBRRL = MYUBRR;</code></div>
                                          <div><span><code>    </code></span></div>
                                          <div><span><code>    </code></span><code>UCSRB |= (1 &lt;&lt; RXEN) | (1 &lt;&lt; TXEN);</code><span><code>    </code><span><code>  </code></span></span><span><code>// </code></span><code>Enable receiver and transmitter</code></div>
                                          <div><span><code>    </code></span><code>UCSRC |= (1 &lt;&lt; URSEL) |(1 &lt;&lt; UCSZ1) | (1 &lt;&lt; UCSZ0);</code><span><code>    // Set frame: 8data, 1 stp</code></span></div>
                                          <div><span><br /></span></div>
                                          <div><br /></div><span><code>    while(1)</code></span>
                                        </span></div>
                                      <div><span><span><code>    {</code></span></span></div>
                                      <div><code>    <span>    </span></code><span><code>while ( !(UCSRA &amp; (1 &lt;&lt; RXC)) )<span> <span>   </span></span></code><span><code>// Wait until data is received</code></span></span></div>
                                      <div><span><span><code><span>    <span>    </span></span></code></span></span></div>
                                      <div><span><span><code><span><span><span>    <span>    </span></span>ReceivedChar = </span></span></code></span></span><span style="font-family:monospace;color:rgb(0,96,0)">UDR</span><span style="font-family:monospace;color:rgb(0,96,0)">;<span>    <span>    <span>    <span>     <span>    </span>// Read the data from the RX buffer</span></span></span></span></span></div>
                                      <div><span><span><span><span><span><code>    </code><span><code>    </code></span></span></span></span></span></span></div>
                                      <div><span><span><span><span><span><span><code><span>    <span>    while ( !(UCSRA &amp; (1 &lt;&lt; UDRE)) ) <span>  </span>// Wait until buffer is empty</span></span><br /></code></span></span></span></span></span></span></div>
                                      <div><span><span><span><span><span><span><code><span><span><br /></span></span></code></span></span></span></span></span></span></div>
                                      <div><span><span><span><span><span><span><code><span><span><span>    <span>    UDR = ReceivedChar;<span>    <span>    <span>    <span>    <span> <span>    </span>// Send the data to the TX buffer</span></span></span></span></span></span></span><br /></span></span></code></span></span></span></span></span></span></div>
                                      <div><code><span>    }</span></code><span style="font-family:monospace;color:rgb(0,96,0)">    </span></div>
                                      <div><code>}</code></div>
                                      <div></div>
                                    </span></div>
                                </div><br />
                                <div><span><br /></span></div>
                                <div><span><i>
                                      <div style="font-style:normal"><span><i>ATmega168/328 Code:</i></span></div>
                                      <div style="font-style:normal"></div>
                                      <div class="sites-codeblock sites-codesnippet-block" style="background-color:rgb(239,239,239);border:1px solid rgb(211,211,211);display:block;padding:0.5em 0px 0.5em 1em;line-height:13px;font-style:normal">
                                        <div><code style="color:rgb(0,96,0)">// This code waits for a character and transmits the character back (No interrupts)</code></div>
                                        <div><code style="color:rgb(0,96,0)"> </code></div>
                                        <div><i><br /></i></div>
                                        <div><span><code style="color:rgb(0,96,0)">#include &lt;avr/io.h&gt;</code></span></div>
                                        <div><span><i><span style="font-style:normal;line-height:13px"><code style="color:rgb(0,96,0)">#include &lt;stdint.h&gt;</code><span><code style="color:rgb(0,96,0)">    </code><span><code style="color:rgb(0,96,0)">   <span>    <span>    <span>    <span>  </span></span></span></span>// needed for uint8_t</code></span></span></span></i></span></div>
                                        <div><span><i><span style="font-style:normal;line-height:13px"><span><span><br /></span></span></span></i></span></div>
                                        <div><span><i><br /></i>
                                            <div><code style="color:rgb(0,96,0)">#define FOSC 16000000 </code><span><code style="color:rgb(0,96,0)">    </code><span><code style="color:rgb(0,96,0)">    <span>    <span>    <span>    <span>  </span></span></span></span></code></span></span><code style="color:rgb(0,96,0)">// Clock Speed</code></div>
                                            <div><code style="color:rgb(0,96,0)">#define BAUD 9600</code><span><code style="color:rgb(0,96,0)">    </code><span><code style="color:rgb(0,96,0)">    </code><span><code style="color:rgb(0,96,0)">    </code><span><code style="color:rgb(0,96,0)">    </code></span></span></span></span></div>
                                            <div><code style="color:rgb(0,96,0)">#define MYUBRR FOSC/16/BAUD -1</code></div>
                                            <div><code style="color:rgb(0,96,0)"><br /></code></div>
                                            <div><code style="color:rgb(0,96,0)"><br /></code></div>
                                            <div>
                                              <font color="#006000" face="monospace">char ReceivedChar;</font>
                                            </div>
                                            <div><br /></div>
                                            <div><br /></div>
                                            <div><code style="color:rgb(0,96,0)">int main( void )</code></div>
                                            <div><code style="color:rgb(0,96,0)">{</code></div>
                                            <div><span>
                                                <div><span><code style="color:rgb(0,96,0)">    </code></span><code style="color:rgb(0,96,0)">/*Set baud rate */</code></div>
                                                <div><span><code style="color:rgb(0,96,0)">    </code></span><code style="color:rgb(0,96,0)">UBRR0H = (MYUBRR &gt;&gt; 8);</code></div>
                                                <div><span><code style="color:rgb(0,96,0)">    </code></span><code style="color:rgb(0,96,0)">UBRR0L = MYUBRR;</code></div>
                                                <div><span><code style="color:rgb(0,96,0)">    </code></span></div>
                                                <div><span><code style="color:rgb(0,96,0)">    </code></span><code style="color:rgb(0,96,0)">UCSR0B |= (1 &lt;&lt; RXEN0) | (1 &lt;&lt; TXEN0);</code><span><code style="color:rgb(0,96,0)">    </code><span><code style="color:rgb(0,96,0)">  </code></span></span><span><code style="color:rgb(0,96,0)">// </code></span><code style="color:rgb(0,96,0)">Enable receiver and transmitter</code></div>
                                                <div><span><code style="color:rgb(0,96,0)">    </code></span><code style="color:rgb(0,96,0)">UCSR0C |= (1 &lt;&lt; UCSZ01) | (1 &lt;&lt; UCSZ00);</code><span><code style="color:rgb(0,96,0)">    // Set frame: 8data, 1 stp</code></span></div>
                                                <div><span><br /></span></div>
                                                <div><br /></div><span><code style="color:rgb(0,96,0)">    while(1)</code></span>
                                              </span></div>
                                            <div><span><span><code style="color:rgb(0,96,0)">    {</code></span></span></div>
                                            <div><code style="color:rgb(0,96,0)">    <span>    </span></code><span><code style="color:rgb(0,96,0)">while ( !(UCSR0A &amp; (1 &lt;&lt; RXC0)) )<span>  </span></code><span><code style="color:rgb(0,96,0)">// Wait until data is received</code></span></span></div>
                                            <div><span><span><code style="color:rgb(0,96,0)"><span>    <span>    </span></span></code></span></span></div>
                                            <div><span><span><code style="color:rgb(0,96,0)"><span><span><span>    <span>    </span></span>ReceivedChar = </span></span></code></span></span><span style="font-family:monospace;color:rgb(0,96,0)">UDR0</span><span style="font-family:monospace;color:rgb(0,96,0)">;<span>    <span>    <span>    <span>     <span>   </span>// Read the data from the RX buffer</span></span></span></span></span></div>
                                            <div><span><span><span><span><span><code style="color:rgb(0,96,0)">    </code><span><code style="color:rgb(0,96,0)">    </code></span></span></span></span></span></span></div>
                                            <div><span><span><span><span><span><span><code style="color:rgb(0,96,0)"><span>    <span>    while ( !(UCSR0A &amp; (1 &lt;&lt; UDRE0)) ) // Wait until buffer is empty</span></span><br /></code></span></span></span></span></span></span></div>
                                            <div><span><span><span><span><span><span><code style="color:rgb(0,96,0)"><span><span><br /></span></span></code></span></span></span></span></span></span></div>
                                            <div><span><span><span><span><span><span><code style="color:rgb(0,96,0)"><span><span><span>    <span>    UDR0 = ReceivedChar;<span>    <span>    <span>    <span>    <span>    // Send the data to the TX buffer</span></span></span></span></span></span></span><br /></span></span></code></span></span></span></span></span></span></div>
                                            <div><code style="color:rgb(0,96,0)"><span>    }</span></code><span style="font-family:monospace;color:rgb(0,96,0)">    </span></div>
                                            <div><code style="color:rgb(0,96,0)">}</code></div>
                                          </span></div>
                                      </div>
                                    </i></span></div>
                                <div><span><i><br /></i></span></div>
                                <div><span><i><br /></i></span></div>
                                <div><span><i>    </i>Now lets do the same but this time use interrupts.<br /></span></div>
                                <div><span><br /></span></div>
                                <div><span><br /></span></div>
                                <div><span><i><span style="font-style:normal">
                                        <div><span><i>ATmega8 Code:</i></span></div>
                                        <div></div>
                                        <div class="sites-codeblock sites-codesnippet-block" style="background-color:rgb(239,239,239);border:1px solid rgb(211,211,211);display:block;padding:0.5em 0px 0.5em 1em;line-height:13px">
                                          <div><code style="color:rgb(0,96,0)">// This code waits for a character and transmits the character back (with interrupts)</code></div>
                                          <div><code style="color:rgb(0,96,0)"> </code></div>
                                          <div><i><br /></i></div>
                                          <div><span><code style="color:rgb(0,96,0)">#include &lt;avr/io.h&gt;</code></span></div>
                                          <div><span><i><span style="font-style:normal;line-height:13px"><code style="color:rgb(0,96,0)">#include &lt;stdint.h&gt;</code><span><code style="color:rgb(0,96,0)">    </code><span><code style="color:rgb(0,96,0)">   <span>    <span>    <span>    <span>  </span></span></span></span>// needed for uint8_t</code></span></span></span></i></span></div>
                                          <div><span><i><span style="font-style:normal;line-height:13px"><span><span><code style="color:rgb(0,96,0)"><br /></code></span></span></span></i></span></div>
                                          <div><span><i><span style="font-style:normal;line-height:13px"><span><span><code style="color:rgb(0,96,0)">#include &lt;avr/interrupt.h&gt;</code></span></span></span></i></span></div>
                                          <div><span><i><span style="font-style:normal;line-height:13px"><span><span><br /></span></span></span></i></span></div>
                                          <div><span><i><br /></i>
                                              <div><code style="color:rgb(0,96,0)">#define FOSC 16000000 </code><span><code style="color:rgb(0,96,0)">    </code><span><code style="color:rgb(0,96,0)">    <span>    <span>    <span>    <span>  </span></span></span></span></code></span></span><code style="color:rgb(0,96,0)">// Clock Speed</code></div>
                                              <div><code style="color:rgb(0,96,0)">#define BAUD 9600</code><span><code style="color:rgb(0,96,0)">    </code><span><code style="color:rgb(0,96,0)">    </code><span><code style="color:rgb(0,96,0)">    </code><span><code style="color:rgb(0,96,0)">    </code></span></span></span></span></div>
                                              <div><code style="color:rgb(0,96,0)">#define MYUBRR FOSC/16/BAUD -1</code></div>
                                              <div><code style="color:rgb(0,96,0)"><br /></code></div>
                                              <div><code style="color:rgb(0,96,0)"><br /></code></div>
                                              <div>
                                                <font color="#006000" face="monospace">volatile char ReceivedChar;</font>
                                              </div>
                                              <div><br /></div>
                                              <div><br /></div>
                                              <div><code style="color:rgb(0,96,0)">int main( void )</code></div>
                                              <div><code style="color:rgb(0,96,0)">{</code></div>
                                              <div><span>
                                                  <div><span><code style="color:rgb(0,96,0)">    </code></span><code style="color:rgb(0,96,0)">/*Set baud rate */</code></div>
                                                  <div><span><code style="color:rgb(0,96,0)">    </code></span><code style="color:rgb(0,96,0)">UBRRH = (MYUBRR &gt;&gt; 8);</code></div>
                                                  <div><span><code style="color:rgb(0,96,0)">    </code></span><code style="color:rgb(0,96,0)">UBRRL = MYUBRR;</code></div>
                                                  <div><span><code style="color:rgb(0,96,0)">    </code></span></div>
                                                  <div><span><code style="color:rgb(0,96,0)">    </code></span><code style="color:rgb(0,96,0)">UCSRB |= (1 &lt;&lt; RXEN) | (1 &lt;&lt; TXEN);</code><span><code style="color:rgb(0,96,0)">    </code><span><code style="color:rgb(0,96,0)">  </code></span></span><span><code style="color:rgb(0,96,0)">// </code></span><code style="color:rgb(0,96,0)">Enable receiver and transmitter</code></div>
                                                  <div><span><code style="color:rgb(0,96,0)"><span>    UCSRB |= (1 &lt;&lt; RXCIE);<span>    <span>    <span>    <span>    <span>   // Enable the receiver interrupt</span></span></span></span></span></span><br /></code></span></div>
                                                  <div><span><code style="color:rgb(0,96,0)">    </code></span><code style="color:rgb(0,96,0)">UCSRC |= (1 &lt;&lt; URSEL) |(1 &lt;&lt; UCSZ1) | (1 &lt;&lt; UCSZ0);</code><span><code style="color:rgb(0,96,0)">    // Set frame: 8data, 1 stp</code></span></div>
                                                  <div><span><code style="color:rgb(0,96,0)"><br /></code></span></div>
                                                  <div><span><code style="color:rgb(0,96,0)"><span><br /></span></code></span></div>
                                                  <div><span><code style="color:rgb(0,96,0)"><span>    </span>sei();</code></span></div>
                                                  <div><br /></div>
                                                  <div><span>    </span><span>   </span><br /></div><span><code style="color:rgb(0,96,0)">    while(1)</code></span>
                                                </span></div>
                                              <div><span><span><code style="color:rgb(0,96,0)">    {</code></span></span></div>
                                              <div><code style="color:rgb(0,96,0)">   <span>    ;<span>    <span>    <span>    <span>    <span>    <span>    <span>    <span>    <span>    // main loop</span></span></span></span></span></span></span></span></span></span></code></div>
                                              <div><code style="color:rgb(0,96,0)"><span>    }</span></code><span style="font-family:monospace;color:rgb(0,96,0)">    </span></div>
                                              <div><code style="color:rgb(0,96,0)">}</code></div>
                                              <div><code style="color:rgb(0,96,0)"><br /></code></div>
                                              <div><code style="color:rgb(0,96,0)"><br /></code></div>
                                              <div>
                                                <font color="#006000" face="monospace">ISR (USART_RXC_vect)</font>
                                              </div>
                                              <div>
                                                <font color="#006000" face="monospace">{</font>
                                              </div>
                                              <div>
                                                <font color="#006000" face="monospace"><span>    ReceivedChar = UDR;<span>    <span>    <span>    <span>    <span>     // Read data from the RX buffer</span></span></span></span></span></span><br /></font>
                                              </div>
                                              <div>
                                                <font color="#006000" face="monospace"><span><span>    UDR = ReceivedChar;<span>    <span>    <span>    <span>    <span>     // Write the data to the TX buffer</span></span></span></span></span></span><br /></span></font>
                                              </div>
                                              <div>
                                                <font color="#006000" face="monospace"><span><span>}</span></span></font>
                                              </div>
                                            </span></div>
                                        </div>
                                      </span></i></span></div>
                                <div><span><i><br /></i></span></div>
                                <div><span><i><br /></i></span></div>
                                <div><span><i><span style="font-style:normal"><i><span style="font-style:normal">
                                            <div><span><i>ATmega168/328 Code:</i></span></div>
                                            <div></div>
                                            <div class="sites-codeblock sites-codesnippet-block" style="background-color:rgb(239,239,239);border:1px solid rgb(211,211,211);display:block;padding:0.5em 0px 0.5em 1em;line-height:13px">
                                              <div><code style="color:rgb(0,96,0)">// This code waits for a character and transmits the character back (with interrupts)</code></div>
                                              <div><code style="color:rgb(0,96,0)"> </code></div>
                                              <div><i><br /></i></div>
                                              <div><span><code style="color:rgb(0,96,0)">#include &lt;avr/io.h&gt;</code></span></div>
                                              <div><span><i><span style="font-style:normal;line-height:13px"><code style="color:rgb(0,96,0)">#include &lt;stdint.h&gt;</code><span><code style="color:rgb(0,96,0)">    </code><span><code style="color:rgb(0,96,0)">   <span>    <span>    <span>    <span>  </span></span></span></span>// needed for uint8_t</code></span></span></span></i></span></div>
                                              <div><span><i><span style="font-style:normal;line-height:13px"><span><span><code style="color:rgb(0,96,0)"><br /></code></span></span></span></i></span></div>
                                              <div><span><i><span style="font-style:normal;line-height:13px"><span><span><code style="color:rgb(0,96,0)">#include &lt;avr/interrupt.h&gt;</code></span></span></span></i></span></div>
                                              <div><br /></div>
                                              <div><span><i><br /></i></span></div>
                                              <div><span><i><br /></i>
                                                  <div><code style="color:rgb(0,96,0)">#define FOSC 16000000 </code><span><code style="color:rgb(0,96,0)">    </code><span><code style="color:rgb(0,96,0)">    <span>    <span>    <span>    <span>  </span></span></span></span></code></span></span><code style="color:rgb(0,96,0)">// Clock Speed</code></div>
                                                  <div><code style="color:rgb(0,96,0)">#define BAUD 9600</code><span><code style="color:rgb(0,96,0)">    </code><span><code style="color:rgb(0,96,0)">    </code><span><code style="color:rgb(0,96,0)">    </code><span><code style="color:rgb(0,96,0)">    </code></span></span></span></span></div>
                                                  <div><code style="color:rgb(0,96,0)">#define MYUBRR FOSC/16/BAUD -1</code></div>
                                                  <div><code style="color:rgb(0,96,0)"><br /></code></div>
                                                  <div><code style="color:rgb(0,96,0)"><br /></code></div>
                                                  <div>
                                                    <font color="#006000" face="monospace">volatile char ReceivedChar;</font>
                                                  </div>
                                                  <div><br /></div>
                                                  <div><br /></div>
                                                  <div><code style="color:rgb(0,96,0)">int main( void )</code></div>
                                                  <div><code style="color:rgb(0,96,0)">{</code></div>
                                                  <div><span>
                                                      <div><span><code style="color:rgb(0,96,0)">    </code></span><code style="color:rgb(0,96,0)">/*Set baud rate */</code></div>
                                                      <div><span><code style="color:rgb(0,96,0)">    </code></span><code style="color:rgb(0,96,0)">UBRR0H = (MYUBRR &gt;&gt; 8);</code></div>
                                                      <div><span><code style="color:rgb(0,96,0)">    </code></span><code style="color:rgb(0,96,0)">UBRR0L = MYUBRR;</code></div>
                                                      <div><span><code style="color:rgb(0,96,0)">    </code></span></div>
                                                      <div><span><code style="color:rgb(0,96,0)">    </code></span><code style="color:rgb(0,96,0)">UCSR0B |= (1 &lt;&lt; RXEN0) | (1 &lt;&lt; TXEN0);</code><span><code style="color:rgb(0,96,0)">    </code><span><code style="color:rgb(0,96,0)">  </code></span></span><span><code style="color:rgb(0,96,0)">// </code></span><code style="color:rgb(0,96,0)">Enable receiver and transmitter</code></div>
                                                      <div><span><code style="color:rgb(0,96,0)">    UCSR0B |= (1 &lt;&lt; RXCIE0);<span>    <span>    <span>    <span>    <span>    // Enable reciever interrupt</span></span></span></span></span></code></span></div>
                                                      <div><code style="color:rgb(0,96,0)"><span>    </span>UCSR0C |= (1 &lt;&lt; UCSZ01) | (1 &lt;&lt; UCSZ00);</code><span><code style="color:rgb(0,96,0)">    // Set frame: 8data, 1 stp</code></span></div>
                                                      <div><span><code style="color:rgb(0,96,0)"><br /></code></span></div>
                                                      <div><span style="color:rgb(0,96,0);font-family:monospace;font-size:13.3333px">    sei();                                      // Lets not forget to enable interrupts =P</span></div>
                                                      <div><br /></div><span><code style="color:rgb(0,96,0)">    while(1)</code></span>
                                                    </span></div>
                                                  <div><span><span><code style="color:rgb(0,96,0)">    {</code></span></span></div>
                                                  <div><code style="color:rgb(0,96,0)">    <span>    ;<span>    <span>    <span>    <span>    <span>    <span>    <span>    <span>    <span>      // Main loop</span></span></span></span></span></span></span></span></span></span></code></div>
                                                  <div><code style="color:rgb(0,96,0)"><span>    }</span></code><span style="font-family:monospace;color:rgb(0,96,0)">    </span></div>
                                                  <div><code style="color:rgb(0,96,0)">}</code></div>
                                                  <div><code style="color:rgb(0,96,0)"><br /></code></div>
                                                  <div><code style="color:rgb(0,96,0)">ISR (USART_RX_vect)</code></div>
                                                  <div>
                                                    <font color="#006000" face="monospace">{</font>
                                                  </div>
                                                  <div>
                                                    <font color="#006000" face="monospace"><span>    ReceivedChar = UDR0;<span>    <span>    <span>    <span>    <span>    <span>   // Read data from the RX buffer</span></span></span></span></span></span></span><br /></font>
                                                  </div>
                                                  <div>
                                                    <font color="#006000" face="monospace"><span><span>    UDR0 = ReceivedChar;<span>    <span>    <span>    <span>   <span>    <span>    // Write the data to the TX buffer</span></span></span></span></span></span></span><br /></span></font>
                                                  </div>
                                                  <div>
                                                    <font color="#006000" face="monospace"><span><span>}</span></span></font>
                                                  </div>
                                                </span></div>
                                            </div>
                                          </span></i></span></i></span></div>
                                <div><span><i><br /></i></span></div>
                                <div><span><i><br /></i></span></div>
                                <div><span><i>    </i>There you go guys, the secrets of the USART are now yours.  If you enslave mankind with this knowledge pay me back by putting me to work in the easiest pits.<br /></span></div>
                                <div><span><br /></span></div>
                                <div><span>Cheers</span></div>
                                <div><span>Q</span></div>
                                <div><span><i><br /></i></span></div>
                                <div><span><i><br /></i></span></div>
                                <div><span><i><br /></i></span></div>
                              </div>
                            </div>
                            <div class="sites-layout-tile sites-tile-name-footer">
                              <div dir="ltr">
                                <div style="text-align:right">Comments? Questions? Problems with content?  <a href="mailto:q.qeewiki@gmail.com" style="color:rgb(0,0,204);text-decoration:underline">q.qeewiki@gmail.com</a></div>
                                <div style="text-align:right"><br /></div>
                                <div style="text-align:right"><br /></div>
                                <div style="text-align:right"><br /></div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </td>
                </tr>
              </table>
            </div>
          </div>
          <div id="sites-chrome-footer-wrapper">
            <div id="sites-chrome-footer-wrapper-inside">
              <div id="sites-chrome-footer">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
  <script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/5acb68/system/js/jot_min_view__en.js"></script>
  <script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
  <script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    sites.Searchbox.initialize(
      'sites-searchbox-search-button',
      { "object": [{ "action": "/site/qeewiki/system/app/pages/search", "id": "search-site", "label": "Search this site" }] }['object'],
      'search-site',
      { "label": "Configure search options...", "url": "/site/qeewiki/system/app/pages/admin/settings" });
  </script>
  <script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
  </script>
  <script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
    JOT_setupNav("2bd", "Navigation", false);
    JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_2bd');
  </script>
  <script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
    JOT_setupNav("5818525579565211", "Resources", false);
    JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_5818525579565211');
  </script>
  <script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
    JOT_setupNav("6477897660156883", "None EE Faves", false);
    JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_6477897660156883');
  </script>
  <script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXvZ96OgAtmrDShx3wcwne5zycb4OvuFMl9d3N2ZmP8xLGnwH0Opp6lpo34bl7vb9HGRzNQAvbvuIc223PM3QWPv9wYw6OGZ69jgCLh9iRGrJVK_e2hL1ZVaIu2oCQE98eYid1Rz/api/js?anon=true',
      false, false);
  </script>
  <script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    setTimeout(function () {
      var fingerprint = gsites.date.TimeZone.getFingerprint([1109635200000, 1128902400000, 1130657000000, 1143333000000, 1143806400000, 1145000000000, 1146380000000, 1152489600000, 1159800000000, 1159500000000, 1162095000000, 1162075000000, 1162105500000]);
      gsites.Xhr.send('https://sites.google.com/site/qeewiki/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
    }, 500);
  </script>
  <script xmlns="http://www.w3.org/1999/xhtml">
    window.onload = function () {
      if (false) {
        JOT_setMobilePreview();
      }
      var loadTimer = window.jstiming.load;
      loadTimer.tick("ol");
      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
    }
  </script>
  <script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_insertAnalyticsCode(false,
      false);
  </script>
  <script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
      webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
  <script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
    //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function () {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
  </script>
  <script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
  <script type="text/javascript">
    JOT_setupPostRenderingManager();
  </script>
  <script type="text/javascript">
    JOT_postEvent('renderPlus', null, 'sites-chrome-main');
  </script>
  <script type="text/javascript">
    sites.codeembed.init();
  </script>
  <div id="server-timer-div" style="display:none"> </div>
  <script type="text/javascript">
    window.jstiming.load.tick('render');
    JOT_postEvent('usercontentrendered', this);
  </script>
</body>

</html>